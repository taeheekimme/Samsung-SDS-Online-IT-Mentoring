## 4. 졸업년도가 있는 사람은 졸업생입니다. 졸업년도가 없는 사람은 재학생으로 분류 합니다. <br>
#### 재학생, 졸업년도 별 성적 평균을 구하시오. (컬럼 : 졸업년도 or 재학생, 성적평균)			<br>

![캡처](https://user-images.githubusercontent.com/59272674/89805484-ab996b80-db70-11ea-9a47-ddfd688685aa.JPG)<br>

SELECT if(graduation.graduation_year is null, '재학생', '졸업생') 재학생, graduation.graduation_year as 졸업년도, avg(score) as 성적평균<br>
FROM student2 <br>
LEFT JOIN graduation ON student2.id = graduation.id<br>
LEFT JOIN score ON student2.id = score.id<br>
GROUP BY 재학생, 졸업년도;<br><br>


## 5. 지역별 인원 수 합계가 2명 이하인 지역명을 조회하시오.		<br>
![1](https://user-images.githubusercontent.com/59272674/89805537-be13a500-db70-11ea-9c3b-f056f6670232.JPG)<br>
SELECT location, COUNT(id) <= 2 as 인원수<br>
FROM student2<br>
LEFT JOIN location ON student2.loc_id = location.loc_id<br>
GROUP BY location;<br>
- COUNT(id) <= 2 하면 불린 값으로 나오므로 0은 fasle로 2이하가 아닌 것, 1은 true로 2이상인 것

**피드백**<br>
select a.location from (SELECT location, count(distinct id) <= 2 as 인원수<br>
FROM student2<br>
LEFT JOIN location ON student2.loc_id = location.loc_id<br>
GROUP BY location) as a where a.인원수 =1 ;<br>

- count는 행 개수를 셈
- sum은 숫자를 더하는 것이므로 숫자 칼럼을 지정해줘야 함. 데이터 타입도 int여야 함
- count(*)하면 중복 포함한 개수
- count(distinct id)하면 중복 제외한 id개수
- select는 중복된 것도 가져오므로 distinct해줘야 함

## 6. 성씨를 제외한 이름이 동일한 사람들을 조회하시오. (출력: id, 이름)		<br>	
 SELECT id, name<br>
FROM student2 <br>
WHERE substr(name, 2, 3 ) >1 ;<br>
- 이름이 2글자면?
- substr에 칼럼이름?

**피드백**<br>
select substring(name, 2) as name1, count(*) as count1<br>
from student2<br>
group by name1 <br>
having name2 > 1 ;<br>
- substr는 오라클에서 사용
- 그룹화한 것의 조건이므로 having

## 7. 졸업자들의 졸업 당시의 나이를 구하시오. (출력 : id, 이름, 졸업년도, 생년월일, 당시나이)	<br>
![3](https://user-images.githubusercontent.com/59272674/89805558-c966d080-db70-11ea-8cf8-c0cfb4c7f2ac.JPG)<br>
SELECT student2.id, student2.name, graduation.graduation_year, ifnull(student2.birth,'1998-01-01'), (graduation.graduation_year - ifnull(year(birth), '1998')) +1  as graduation_age<br>
FROM student2<br>
LEFT JOIN graduation ON student2.id = graduation.id<br>
where graduation_year is not null;<br>
- 졸업당시나이 = 현재년도 - 졸업년도 +1
- ifnull(student2.birth,'1998-01-01') : null이 아닐 떄 값을 지정해 주지 않아도 됨
- if(location.location is null, '기타',location.location): null이 아닐 때 값도 지정해줘야 함


