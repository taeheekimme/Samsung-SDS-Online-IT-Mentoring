## student2 <br>
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE student2(<br>
	id INT(5) NOT NULL,<br>
    name VARCHAR(50) NOT NULL,<br>
    gender VARCHAR(1),<br>
    loc_id VARCHAR(5),<br>
    class VARCHAR(2), <br>
	  birth date,<br>
    PRIMARY KEY(id)<br>
    );<br><br>

INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10001,'김민','M','L03','C','2001-03-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10002,'이승철','M','L01','D','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10003,'한승리','M','L05','E','2003-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10004,'박구철','M','L02','A','2001-09-09');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10005,'김희진','F','L01','B','2003-02-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10006,'성유일','M','L06','E','2002-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) values(10007,'천수민','F',null ,'C',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10008,'정나훈','M','L05','C','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10009,'민지국','M',null,'E',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10010,'표치수','M','L14','B','2003-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10011,'가온지','F','L07','A',null);<br>                     
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10012,'이지현','F',null,'A','2002-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10013,'장민혁','M','L04','C','2001-03-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10014,'오인준','M','L02','B',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10015,'윤석구','M',null,'D','2002-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10016,'김진수','M','L01','E','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10017,'김미진','F', null,'E',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10018,'현진곤','M','L10','D','1999-06-12');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10019,'유해순','M','L03','D','2001-03-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10020,'고용진','M',null,'A',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10021,'사훈','M','L02','B','2002-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10022,'정도호','M','L01','C','2003-02-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10023,'권순민','M','L05','E','2003-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10024,'송치연','F',null,'E','1999-06-12');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10025,'지혜숙','F','L02','C',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10026,'차동마','M',null,'B','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10027,'나훈','M','L01','A',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10028,'이태현','M',null,'B','2003-02-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10029,'김청기','M','L05','C','2003-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10030,'강지혜','F',null,'E','2001-09-09');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10031,'소현지','F','L01','C','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10032,'김수민','F','L09','A',null);<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10033,'강성진','M','L02','B','2002-05-05');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10034,'김미진','F','L07','B','2001-03-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10035,'현승리','M','L03','A','2002-05-05');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10036,'이순진','F','L13','E','1999-12-31');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10037,'태형구','M','L11','D','2003-06-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10038,'박진수','M','L06','C','2002-04-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10039,'용혜숙','F','L03','B','2001-03-01');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10040,'장지원','F',null,'A','1999-10-12');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10041,'추가영','F','L02','A','2003-01-27');<br>
INSERT INTO student2 (id, name, gender, loc_id, class, birth) VALUES(10042,'명진숙','F','L05','D','2001-03-01');<br><br>
                  
                  
## location <br>
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE location(<br>
	loc_id VARCHAR(5) NOT NULL,<br>
    location VARCHAR(50) NOT NULL,<br>
    PRIMARY KEY(loc_id)<br>
    );<br><br>
    

INSERT INTO location (loc_id,location) VALUES('L01', '서울');<br>
INSERT INTO location (loc_id,location) VALUES('L02', '부산');<br>
INSERT INTO location (loc_id,location) VALUES('L03', '대구');<br>
INSERT INTO location (loc_id,location) VALUES('L04', '전북');<br>
INSERT INTO location (loc_id,location) VALUES('L05', '전남');<br>
INSERT INTO location (loc_id,location) VALUES('L06', '경남');<br>
INSERT INTO location (loc_id,location) VALUES('L07', '경북');<br>
INSERT INTO location (loc_id,location) VALUES('L08', '충남');<br>
INSERT INTO location (loc_id,location) VALUES('L09', '충북');<br>
INSERT INTO location (loc_id,location) VALUES('L10', '경기');<br>
INSERT INTO location (loc_id,location) VALUES('L11', '인천');<br>
INSERT INTO location (loc_id,location) VALUES('L12', '대전');<br>
INSERT INTO location (loc_id,location) VALUES('L13', '울산');<br>
INSERT INTO location (loc_id,location) VALUES('L14', '제주');<br>
INSERT INTO location (loc_id,location) VALUES('L15', '기타');<br><br>

    
## class_info <br>
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE class_info(<br>
	class VARCHAR(2) NOT NULL,<br>
    class_name VARCHAR(50) NOT NULL,<br>
    PRIMARY KEY(class)<br>
    );<br><br>


INSERT INTO class_info (class, class_name) VALUES('A', '햇님반');<br>
INSERT INTO class_info (class, class_name) VALUES('B', '풀꽃반');<br>
INSERT INTO class_info (class, class_name) VALUES('C', '바다반');<br>
INSERT INTO class_info (class, class_name) VALUES('D', '소망반');<br>
INSERT INTO class_info (class, class_name) VALUES('E', '사랑반');<br><br>

## graduation <br>
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE graduation(<br>
	id INT(5) NOT NULL,<br>
    graduation_year VARCHAR(4) NOT NULL,<br>
    PRIMARY KEY(id)<br>
    );<br><br>


INSERT INTO student(id, graduation_year) values(10001,2020);				<br>
INSERT INTO student(id, graduation_year) values(10003,2019);			 <br>	
INSERT INTO student(id, graduation_year) values(10004,2018);		  	<br>	
INSERT INTO student(id, graduation_year) values(10006,2020);			 <br>	
INSERT INTO student(id, graduation_year) values(10007,2019);				<br>
INSERT INTO student(id, graduation_year) values(10008,2020);				<br>
INSERT INTO student(id, graduation_year) values(10020,2018);				<br>
INSERT INTO student(id, graduation_year) values(10023,2018);				<br>
INSERT INTO student(id, graduation_year) values(10024,2018);				<br>
INSERT INTO student(id, graduation_year) values(10026,2020);				<br>
INSERT INTO student(id, graduation_year) values(10027,2020);				<br>
INSERT INTO student(id, graduation_year) values(10028,2018);				<br>
INSERT INTO student(id, graduation_year) values(10030,2020);				<br>
INSERT INTO student(id, graduation_year) values(10031,2019);				<br>
INSERT INTO student(id, graduation_year) values(10033,2018);				<br>
INSERT INTO student(id, graduation_year) values(10034,2020);				<br>
INSERT INTO student(id, graduation_year) values(10035,2019);				<br>
INSERT INTO student(id, graduation_year) values(10036,2019);				<br>
INSERT INTO student(id, graduation_year) values(10039,2020);				<br>
INSERT INTO student(id, graduation_year) values(10041,2019);				<br>
INSERT INTO student(id, graduation_year) values(10042,2020);				<br><br>



## score   <br>                                                       
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE score(<br>
	id INT(5) NOT NULL,<br>
    score INT(3) NOT NULL,<br>
    PRIMARY KEY(id)<br>
    );<br><br>
    

    
INSERT INTO  score (id, score) VALUES(10001, 5);<br>
INSERT INTO  score (id, score) VALUES(10002, 4);<br>
INSERT INTO  score (id, score) VALUES(10003, 3);<br>
INSERT INTO  score (id, score) VALUES(10004, 1);<br>
INSERT INTO  score (id, score) VALUES(10005, 2);<br>
INSERT INTO  score (id, score) VALUES(10006, 3);<br>
INSERT INTO  score (id, score) VALUES(10007, 4);<br>
INSERT INTO  score (id, score) VALUES(10009, 4);<br>
INSERT INTO  score (id, score) VALUES(10010, 5);<br>
INSERT INTO  score (id, score) VALUES(10011, 3);<br>
INSERT INTO  score (id, score) VALUES(10012, 2);<br>
INSERT INTO  score (id, score) VALUES(10013, 3);<br>
INSERT INTO  score (id, score) VALUES(10014, 2);<br>
INSERT INTO  score (id, score) VALUES(10015, 3);<br>
INSERT INTO  score (id, score) VALUES(10016, 4);<br>
INSERT INTO  score (id, score) VALUES(10018, 2);<br>
INSERT INTO  score (id, score) VALUES(10019, 3);<br>
INSERT INTO  score (id, score) VALUES(10020, 5);<br>
INSERT INTO  score (id, score) VALUES(10021, 4);<br>
INSERT INTO  score (id, score) VALUES(10022, 3);<br>
INSERT INTO  score (id, score) VALUES(10023, 2);<br>
INSERT INTO  score (id, score) VALUES(10024, 1);<br>
INSERT INTO  score (id, score) VALUES(10025, 3);<br>
INSERT INTO  score (id, score) VALUES(10026, 5);<br>
INSERT INTO  score (id, score) VALUES(10027, 4);<br>
INSERT INTO  score (id, score) VALUES(10028, 3);<br>
INSERT INTO  score (id, score) VALUES(10029, 4);<br>
INSERT INTO  score (id, score) VALUES(10030, 4);<br>
INSERT INTO  score (id, score) VALUES(10031, 3);<br>
INSERT INTO  score (id, score) VALUES(10032, 1);<br>
INSERT INTO  score (id, score) VALUES(10033, 3);<br>
INSERT INTO  score (id, score) VALUES(10034, 4);<br>
INSERT INTO  score (id, score) VALUES(10035, 4);<br>
INSERT INTO  score (id, score) VALUES(10036, 3);<br>
INSERT INTO  score (id, score) VALUES(10037, 2);<br>
INSERT INTO  score (id, score) VALUES(10039, 2);<br>
INSERT INTO  score (id, score) VALUES(10040, 3);<br>
INSERT INTO  score (id, score) VALUES(10041, 4);<br>
INSERT INTO  score (id, score) VALUES(10042, 5);<br><br>

## prize <br>
CREATE DATABASE mystudy;<br><br>
USE mystudy;<br><br>
CREATE TABLE prize(<br>
	id INT(5) NOT NULL,<br>
    prize VARCHAR(10) NOT NULL
    );<br><br>

INSERT INTO prize (id, prize) VALUES(10027,'개근상');<br>
INSERT INTO prize (id, prize) VALUES(10027,'모범상');<br>
INSERT INTO prize (id, prize) VALUES(10039,'개근상');<br>
INSERT INTO prize (id, prize) VALUES(10040,'우수상');<br>
INSERT INTO prize (id, prize) VALUES(10007,'개근상');<br>
INSERT INTO prize (id, prize) VALUES(10011,'모범상');<br>
INSERT INTO prize (id, prize) VALUES(10022,'개근상');<br>
INSERT INTO prize (id, prize) VALUES(10009,'개근상');<br>
INSERT INTO prize (id, prize) VALUES(10007,'우수상');<br>
INSERT INTO prize (id, prize) VALUES(10039,'혁신상');<br>
INSERT INTO prize (id, prize) VALUES(10021,'노력상');<br>
INSERT INTO prize (id, prize) VALUES(10007,'성실상');<br>
INSERT INTO prize (id, prize) VALUES(10013,'봉사상');<br>
INSERT INTO prize (id, prize) VALUES(10010,'봉사상');<br>
INSERT INTO prize (id, prize) VALUES(10010,'성실상');<br><br>


						
### 1. id, 이름, 반이름, 위치명, 성적, 졸업여부를 조회하시오. 
### 단, 지역코드가 없는 사람은 일괄 "기타" 로 처리, 성적이 없을 경우 0점으로 처리, 졸업년도가 있는 사람은 졸업여부 Y 없을 경우 N로 처리			<br>			

SELECT student2.id, student2.name, class_info.class_name, 	<br>		
if(location.location is null, '기타',location.location) AS location_name, 	<br>		
if(score.score is null,0,score.score) as score, 	<br>		
if(graduation.graduation_year is null,'Y', 'N' ) AS graduation, graduation_year	<br>		
FROM student2<br>
LEFT JOIN class_info ON student2.class = class_info.class<br>
LEFT JOIN location ON student2.loc_id = location.loc_id<br>
LEFT JOIN score ON student2.id = score.id<br>
LEFT JOIN graduation ON student2.id = graduation.id;<br><br>



### 2. 남녀 성별로 성적 합계, 평균을 구하시오.
### 단. 성적이 없는 사람은 0점 처리<br>
SELECT student2.gender, SUM(if(score.score is null,0,score.score)), AVG(if(score.score is null,0,score.score))<br>
FROM student2 <br>
LEFT JOIN score ON student2.id = score.id  <br>
GROUP BY student2.gender;<br><br>
						
                        
### 3. 연령별 성적 합계, 평균을 구하시오.
### 단. 성적이 없는 사람은 0점 처리, 생년월일이 비어 있는 사람은 일괄 1998년 01년 01생으로 처리	<br>				
SELECT floor((curdate() - if(birth is null, str_to_date('1998-01-01','%Y-%m-%d'),birth))/10000) age, 
SUM(if(score.score is null, 0, score.score)), 
AVG(if(score.score is null, 0, score.score))  
FROM student2 <br>
LEFT JOIN score ON student2.id = score.id  <br>
GROUP BY age<br>
ORDER BY age DESC ;<br>
-  별칭으로 호출 가능
